(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(39)},30:function(e,t,n){},35:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(22),i=n.n(r),s=(n(30),n(3)),c=n(4),l=n(7),u=n(5),p=n(6),d=n(2),m=n(8),h=(n(35),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handlePlantSeed=function(){n.props.createRoot()},n.handleCreateShape=function(){n.props.createNodes()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.handlePlantSeed();var t=setInterval(function(){e.handleCreateShape()},50);setTimeout(function(){console.log("cleared, final state:",e.props.nodes),clearInterval(t)},1e3)}},{key:"render",value:function(){console.log("zoom",this.props.stage.zoom);window.innerWidth,window.innerHeight,window.innerWidth,window.innerHeight;var e={position:"relative",left:0,top:0,width:window.innerWidth,height:window.innerHeight,transform:"scale(".concat(this.props.stage.zoom,")")};return o.a.createElement("svg",{className:"stage",id:"spawn-canvas",style:e},this.props.nodes.map(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("defs",null,o.a.createElement("radialGradient",{id:"exampleGradient"},o.a.createElement("stop",{offset:"10%","stop-color":"gold"}),o.a.createElement("stop",{offset:"95%","stop-color":"green"}))),o.a.createElement("circle",{cx:e.coordX,cy:e.coordY,r:e.radius}))}))}}]),t}(a.Component)),g=(Object(m.b)(function(e){return{viewportDims:e.viewportDims,settings:e.settings,nodes:e.nodes,leaves:e.leaves,stage:e.stage}},function(e){return{createRoot:function(){return e({type:"CREATE_ROOT"})},createNodes:function(){return e({type:"CREATE_NODES"})}}})(h),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handlePlantSeed=function(){n.props.createRoot()},n.handleCreateShape=function(){n.props.createNodes()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.handlePlantSeed();var t=setInterval(function(){e.handleCreateShape()},50);setTimeout(function(){console.log("cleared, final state:",e.props.nodes),clearInterval(t)},1e3)}},{key:"render",value:function(){return console.log("zoom",this.props.stage.zoom),o.a.createElement("div",{style:{position:"relative",left:0,top:0,width:this.props.viewportDims.width,height:this.props.viewportDims.height}},this.props.nodes.map(function(e,t){var n={width:2*e.radius,height:2*e.radius,left:e.coordX,top:e.coordY,borderRadius:"50%",background:"radial-gradient(rgba(".concat(e.color,", 0.1),rgba(").concat(e.color,", 0.2) , rgba(").concat(e.color,", 0.8))"),position:"absolute",transform:"translate(-".concat(e.radius,"px, -").concat(e.radius,"px)")};return o.a.createElement("div",{style:n,key:t})}))}}]),t}(a.Component)),f=Object(m.b)(function(e){return{viewportDims:e.viewportDims,settings:e.settings,nodes:e.nodes,leaves:e.leaves,stage:e.stage}},function(e){return{createRoot:function(){return e({type:"CREATE_ROOT"})},createNodes:function(){return e({type:"CREATE_NODES"})}}})(g),b=n(10),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.propName,n=e.propLabel,a=e.propValue,r=e.propMin,i=e.propMax,s=e.fieldChange,c=e.formSubmit;return o.a.createElement("div",{className:"settings-controllers"},o.a.createElement("label",{className:"controller-label"},n),o.a.createElement("input",{className:"sliders",type:"range",id:t+"Slider",min:r,max:i,value:a,onChange:function(e){return s(e.target.value,t)},onMouseUp:function(e){return c(e)}}),o.a.createElement("input",{className:"text-fields",type:"text",id:t,value:a,onChange:function(e){return s(e.target.value,t)}}))}}]),t}(a.Component),O=(a.Component,function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormChange=function(e,t,a){console.log("input:",e,"i",a),void 0===a?n.setState(Object(b.a)({},t,e)):0===a?(n.setState(Object(b.a)({},t,[[e,n.state.angleRange[0][1]]])),console.log(n.state.angleRange,"i",a)):1===a&&(n.setState(Object(b.a)({},t,[[n.state.angleRange[0][0],e]])),console.log(n.state.angleRange,"i",a))},n.handleFormSubmission=function(e){e.preventDefault(),n.props.updateSettings(n.state),n.props.reset(),n.plantSeed();var t=setInterval(function(){n.handleCreateShape()},50);setTimeout(function(){clearInterval(t)},1e4)},n.plantSeed=function(){n.props.createRoot()},n.handleCreateShape=function(){n.props.createNodes()},n.state=n.props.settings,n.handleFormChange=n.handleFormChange.bind(Object(d.a)(Object(d.a)(n))),n.handleFormSubmission=n.handleFormSubmission.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"settings-controller"},o.a.createElement("form",{className:"settings-form",onSubmit:function(t){e.handleFormSubmission(t)}},o.a.createElement(v,{propName:"minSize",propLabel:"Min Size",propValue:this.state.minSize,propMin:1,propMax:10,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),o.a.createElement(v,{propName:"multiplierPrecision",propLabel:"x Precision",propValue:this.state.multiplierPrecision,propMin:0,propMax:100,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),o.a.createElement(v,{propName:"decay",propLabel:"Decay",propValue:this.state.decay,propMin:10,propMax:100,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),o.a.createElement(v,{propName:"decayPrecision",propLabel:"D Precision",propValue:this.state.decayPrecision,propMin:0,propMax:100,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),o.a.createElement("input",{className:"reset-button",type:"submit",value:"Reset"})))}}]),t}(a.Component)),w=Object(m.b)(function(e){return{settings:e.settings,nodes:e.nodes,leaves:e.leaves}},function(e){return{updateSettings:function(t){return e({type:"UPDATE_SETTINGS",settings:t})},reset:function(){return e({type:"RESET"})},createRoot:function(){return e({type:"CREATE_ROOT"})},createNodes:function(){return e({type:"CREATE_NODES"})}}})(O),j=n(9),M=n(11),y=n(24),E=n.n(y),x=n(18),S=n(20);function D(e,t,n){return e.map(function(e,a){var o=Object.assign({},e);return o.angle+=T(t[n][0]),o})}function R(e,t){return e.findIndex(function(e){return t>=e[0]&&t<=e[1]})}function C(e){return Math.round(180*e/Math.PI)}function T(e){return Math.round(e*Math.PI*100/180)/100}var A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).fromRangeToAngle=function(){return{deg:parseFloat(n.props.angle),rad:T(parseFloat(n.props.angle))}},n.fromAngleToRange=function(){var e=n.state.angleRange;e[parseFloat(n.state.id[0])][parseFloat(n.state.id[1])]=n.state.angle.deg,n.setState({angleRange:e})},n.toggleHover=function(){n.setState({hover:!n.state.hover})},n.onMouseDown=function(e){0===e.button&&(n.setState({dragging:!0}),e.stopPropagation(),e.preventDefault())},n.onMouseUp=function(e){n.setState({dragging:!1,mouseQuad:0}),e.stopPropagation(),e.preventDefault()},n.onMouseMove=function(e){if(n.state.dragging){var t=e.pageY-n.state.center.cy,a=e.pageX-n.state.center.cx,o=Math.atan(t/a);a<0&&t<0?o-=Math.PI:a<0&&t>0&&(o+=Math.PI),o<=n.state.minMax.min&&(o=n.state.minMax.min),o>=n.state.minMax.max&&(o=n.state.minMax.max),Math.abs(n.state.angle.rad-o)>Math.PI/4&&(o=n.state.angle.rad),n.updateStates(o),e.stopPropagation(),e.preventDefault()}},n.updateStates=function(e){n.setState({angle:{deg:C(e),rad:e}}),n.fromAngleToRange(),n.props.handleChange(n.state.angleRange,"angleRange",n.state.id),n.setState({minMax:n.props.minMax})},n.state={angleRange:n.props.settings.angleRange,radius:parseFloat(n.props.radius),handle:{height:3},hover:!1,dragging:!1,id:n.props.id,minMax:n.props.minMax},n.state=Object(j.a)({},n.state,{center:{cx:10+parseFloat(n.props.radius),cy:-10+n.props.viewportDims.height-n.props.radius},angle:n.fromRangeToAngle()}),n.state=Object(j.a)({},n.state,{pos:{x:parseFloat(n.state.radius),y:parseFloat(n.state.radius)}}),n.onMouseDown=n.onMouseDown.bind(Object(d.a)(Object(d.a)(n))),n.onMouseUp=n.onMouseUp.bind(Object(d.a)(Object(d.a)(n))),n.onMouseMove=n.onMouseMove.bind(Object(d.a)(Object(d.a)(n))),n.fromRangeToAngle=n.fromRangeToAngle.bind(Object(d.a)(Object(d.a)(n))),n.fromAngleToRange=n.fromAngleToRange.bind(Object(d.a)(Object(d.a)(n))),n.updateStates=n.updateStates.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp))}},{key:"render",value:function(){var e=["handlebars"];this.state.hover&&(e+="hover");var t={position:"absolute",height:"".concat(this.state.handle.height,"px"),width:this.state.radius,left:"".concat(this.state.pos.x,"px"),top:"".concat(this.state.pos.y,"px"),transform:"rotate(".concat(this.state.angle.deg,"deg)"),transformOrigin:"0px",borderRadius:"5px",textAlign:"end",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",paddingRight:"5px"};return o.a.createElement("div",{style:t,className:e,onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,onMouseDown:this.onMouseDown},o.a.createElement(x.a,{icon:S.b}),o.a.createElement(x.a,{icon:S.a}))}}]),t}(a.Component),N=Object(m.b)(function(e){return{settings:e.settings,viewportDims:e.viewportDims}},function(e){return{}})(A);function F(e,t){return e.reduce(function(e,t){return e.concat(t)},[])}function P(e,t){return e.map(function(e){return e[t]})}var k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormChange=function(e,t,a){n.setState(Object(b.a)({},t,e)),n.setState({minMax:n.calcAllMinMax()})},n.calcAllMinMax=function(){var e=F(n.state.angleRange),t=F([-180,e,180]),a=t.map(function(e,a){if(0===a||a===t.length-1)return{};var o=a-1,r=a+1,i=Math.floor((a-1)/2)+""+(a-1)%2;return Object(b.a)({},i,{min:T(t[o]+n.state.pad),max:T(t[r]-n.state.pad)})});return Object.assign.apply(Object,[{}].concat(Object(M.a)(a)))},n.createPieData=function(e,t){return F(e.map(function(e,a,o){var r=0;r=a>=o.length-1?t+360:o[a+1][0];var i={title:"".concat(a),value:parseFloat(e[1])%360-parseFloat(e[0])%360,color:"rgba(210, 77, 87, 0.7)"},s=r-parseFloat(e[1])%360;return[i,{title:"blank".concat(a),value:s,color:s<=n.state.pad?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.2)"}]}))},n.state={angleRange:n.props.settings.angleRange,maxAngleRanges:n.props.settings.maxAngleRanges,radius:n.props.radius},n.state=Object(j.a)({},n.state,{minMax:n.calcAllMinMax(),pad:10}),n.handleFormChange=n.handleFormChange.bind(Object(d.a)(Object(d.a)(n))),n.calcAllMinMax=n.calcAllMinMax.bind(Object(d.a)(Object(d.a)(n))),n.createPieData=n.createPieData.bind(Object(d.a)(Object(d.a)(n))),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.angleRange,n=Math.min.apply(Math,Object(M.a)(t[0])),a=this.state.radius;return o.a.createElement("div",{className:"radial-controller"},t.map(function(t,n){return o.a.createElement("div",{className:"rangeHandlebars",key:n},o.a.createElement(N,{radius:a,angle:parseFloat(t[0])%360,minMax:e.state.minMax[n+"0"],id:n+"0",handleChange:e.handleFormChange}),o.a.createElement(N,{radius:a,angle:parseFloat(t[1])%360,minMax:e.state.minMax[n+"1"],id:n+"1",handleChange:e.handleFormChange}))}),o.a.createElement(E.a,{data:this.createPieData(t,n),style:{width:"".concat(2*a,"px")},segmentsStyle:{transition:"stroke .3s"},startAngle:parseFloat(t[0][0])%360,totalValue:360,lineWidth:42,radius:42}))}}]),t}(a.Component),_=Object(m.b)(function(e){return{settings:e.settings}},function(e){return{updateSettings:function(t){return e({type:"UPDATE_SETTINGS",settings:t})},reset:function(){return e({type:"RESET"})}}})(k),W=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("zoom",this.props.stage.zoom),o.a.createElement("div",{style:{position:"absolute",left:0,top:0,width:this.props.viewportDims.width,height:this.props.viewportDims.height}},this.props.obstacles.map(function(e,t){var n={width:e[2].x-e[0].x,height:e[2].y-e[0].y,left:e[0].x,top:e[0].y,background:"black",position:"absolute"};return o.a.createElement("div",{style:n,key:t})}))}}]),t}(a.Component),z=(Object(m.b)(function(e){return{viewportDims:e.viewportDims,settings:e.settings,obstacles:e.obstacles,stage:e.stage}},function(e){return{}})(W),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=n.props.viewportDims,n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(d.a)(Object(d.a)(n))),console.log("viewport",n.state),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight}),this.props.updateViewport(this.state)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("div",{className:"stage",style:{transform:"scale(".concat(this.props.stage.zoom,")"),position:"relative"}},o.a.createElement(f,null)),o.a.createElement(_,{radius:.08*this.state.width}),o.a.createElement(w,null)))}}]),t}(a.Component)),I=Object(m.b)(function(e){return{viewportDims:e.viewportDims,stage:e.stage}},function(e){return{updateViewport:function(t){return e({type:"UPDATE_VIEWPORT",viewportDims:t})}}})(z);var U=function(e,t,n,a,o){var r=e*(t/100)*(a/100),i=0;return 2===o?i=Math.random()-Math.random():1===o||-1===o?i=o*Math.abs(Math.random()-Math.random()):o=-1,t/100*e+i*r*(100-n)/100};function L(e,t){var n=e.map(function(e,n){return function(e,t){var n=0,a=0,o=e.radius+10,r=[],i=0,s=(Math.atan(t.minSize/o),U(e.radius,t.multiplier,t.multiplierPrecision,50,2));if(e.radius<=t.minSize||40===e.id.length)return r;for(;s>=t.minSize;){n=U(s*Math.random(),t.decay,t.decayPrecision,100,2);var c=Math.atan(n/o);s-=n,n>=t.minSize&&(a+=c,r.push({id:e.id+""+i,radius:n,distance:o,coordX:e.coordX,coordY:e.coordY,angle:a,color:"210, ".concat(20*n,", ").concat(40*n)}),i+=1,a+=c)}return function(e,t,n,a){var o,r=n.map(function(e,t){return e[1]-e[0]}).reduce(function(e,t){return e+t}),i=(n.length,r-t);i<0&&(i=0),o=0===e.length?0:T(i/(2*e.length)),T(n[0][0]);for(var s=[],c=e,l=[],u=0;u<n.length;u++){l=D(c,n,u);for(var p=0;p<c.length;p++){var d=Object.assign({},l[p]),m=d.angle+(2*p+1)*o;if(-1===R(n,C(m)))break;d.angle=m,s.push(d),c.splice(0,p)}}return s.filter(function(e){return null!=e}).map(function(e,t){var n=Object.assign({},e);return n.angle+=T(a),n})}(r,Math.abs(C(a)),t.angleRange,C(e.angle)%360).map(function(e,t){var n=Object.assign({},e);return n.coordX=n.coordX+n.distance*Math.cos(n.angle),n.coordY=n.coordY+n.distance*Math.sin(n.angle),n})}(e,t)});return n=F(n)}var X=L;window.offlineTest=function(){var e={angleRange:[[-100,-70],[-45,45],[70,100]],maxAngleRanges:4,minSize:1,multiplier:130,multiplierPrecision:40,decay:90,decayPrecision:40},t=[{id:0,radius:200,coordX:450,coordY:450,angle:0}],n=t;console.time("fragArray");for(var a=0;a<50&&(n=L(n,e),Array.prototype.push.apply(t,n),!(0===n.length||n.length>2e4));a++);console.timeEnd("fragArray"),console.log(t.length),window.newNodes=t};var V=function(e,t,n){var a=P(e,"coordX"),o=P(e,"coordY"),r=Math.max.apply(Math,Object(M.a)(a).concat([t.x.max])),i=Math.min.apply(Math,Object(M.a)(a).concat([t.x.min])),s=Math.max.apply(Math,Object(M.a)(o).concat([t.y.max])),c=Math.min.apply(Math,Object(M.a)(o).concat([t.y.min])),l=Math.max(Math.abs(i),r-t.x.max),u=Math.max(Math.abs(c),s-t.y.max);return{x:{min:-l,max:n.width+l},y:{min:-u,max:n.height+u},zoom:Math.trunc(9e3/Math.max(1+2*l/n.width,1+2*u/n.height))/1e4}};var H={viewportDims:{width:window.innerWidth,height:window.innerHeight},stage:{x:{min:0,max:window.innerWidth},y:{min:0,max:window.innerHeight},zoom:1},settings:{angleRange:[[-100,-70],[-45,45],[70,100]],maxAngleRanges:4,minSize:1,multiplier:130,multiplierPrecision:80,decay:90,decayPrecision:40},nodes:[],leaves:[],obstacles:[[{x:0,y:0},{x:window.innerWidth,y:0},{x:window.innerWidth,y:50},{x:0,y:50}],[{x:window.innerWidth-50,y:200},{x:window.innerWidth,y:200},{x:window.innerWidth,y:600},{x:window.innerWidth-50,y:600}]]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,n=e.nodes.slice(),a=e.leaves.slice(),o=Object(j.a)({},e.settings),r=Object(j.a)({},e.viewportDims),i=e.stage;switch(t.type){case"RESET":var s={x:{min:0,max:window.innerWidth},y:{min:0,max:window.innerHeight},zoom:1};return Object(j.a)({},e,{nodes:[],leaves:[],stage:s});case"CREATE_ROOT":return a=n=[{id:0,radius:150,coordX:e.viewportDims.width/2,coordY:e.viewportDims.height/2,angle:0,color:"210, ".concat(3e3,", ").concat(6e3)}],Object(j.a)({},e,{nodes:n,leaves:a});case"CREATE_NODES":return a=X(a,o),i=V(a,e.stage,e.viewportDims),Array.prototype.push.apply(n,a),Object(j.a)({},e,{nodes:n,leaves:a,stage:i});case"UPDATE_SETTINGS":return o=t.settings,Object(j.a)({},e,{settings:o});case"UPDATE_VIEWPORT":return r=t.viewportDims,Object(j.a)({},e,{viewportDims:r});default:return e}},G=n(14),J=Object(G.b)(Y,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(o.a.createElement(m.a,{store:J},o.a.createElement(I,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.4d8095b9.chunk.js.map