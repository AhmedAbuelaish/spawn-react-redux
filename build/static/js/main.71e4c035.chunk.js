(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(39)},30:function(e,t,a){},35:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),o=a.n(i),s=(a(30),a(3)),c=a(4),l=a(7),u=a(5),p=a(6),d=a(2),m=a(9),g=(a(35),n.Component,function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handlePlantSeed=function(){a.props.createRoot()},a.handleCreateShape=function(){a.props.createNodes()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.handlePlantSeed();var t=setInterval(function(){e.handleCreateShape()},50);setTimeout(function(){console.log("cleared, final state:",e.props.nodes),clearInterval(t)},1e3)}},{key:"render",value:function(){return console.log("zoom",this.props.stage.zoom),r.a.createElement("div",{className:"stage",style:{position:"relative",left:0,top:0,width:this.props.viewportDims.width,height:this.props.viewportDims.height,transform:"scale(".concat(this.props.stage.zoom,")")}},this.props.nodes.map(function(e,t){var a={width:2*e.radius,height:2*e.radius,left:e.coordX,top:e.coordY,borderRadius:"50%",background:"radial-gradient(rgba(210, 77, 87, 0.1),rgba(210, 77, 87, 0.2) , rgba(210, 77, 87, 0.8))",position:"absolute",transform:"translate(-".concat(e.radius,"px, -").concat(e.radius,"px)")};return r.a.createElement("div",{style:a,key:t})}))}}]),t}(n.Component)),h=(Object(m.b)(function(e){return{viewportDims:e.viewportDims,settings:e.settings,nodes:e.nodes,leaves:e.leaves,stage:e.stage}},function(e){return{createRoot:function(){return e({type:"CREATE_ROOT"})},createNodes:function(){return e({type:"CREATE_NODES"})}}})(g),a(10)),b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.propName,a=e.propLabel,n=e.propValue,i=e.propMin,o=e.propMax,s=e.fieldChange,c=e.formSubmit;return r.a.createElement("div",{className:"settings-controllers"},r.a.createElement("label",{className:"controller-label"},a),r.a.createElement("input",{className:"sliders",type:"range",id:t+"Slider",min:i,max:o,value:n,onChange:function(e){return s(e.target.value,t)},onMouseUp:function(e){return c(e)}}),r.a.createElement("input",{className:"text-fields",type:"text",id:t,value:n,onChange:function(e){return s(e.target.value,t)}}))}}]),t}(n.Component),f=(n.Component,function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormChange=function(e,t,n){console.log("input:",e,"i",n),void 0===n?a.setState(Object(h.a)({},t,e)):0===n?(a.setState(Object(h.a)({},t,[[e,a.state.angleRange[0][1]]])),console.log(a.state.angleRange,"i",n)):1===n&&(a.setState(Object(h.a)({},t,[[a.state.angleRange[0][0],e]])),console.log(a.state.angleRange,"i",n))},a.handleFormSubmission=function(e){e.preventDefault(),a.props.updateSettings(a.state),a.props.reset(),a.plantSeed();var t=setInterval(function(){a.handleCreateShape()},50);setTimeout(function(){clearInterval(t)},1e4)},a.plantSeed=function(){a.props.createRoot()},a.handleCreateShape=function(){a.props.createNodes()},a.state=a.props.settings,a.handleFormChange=a.handleFormChange.bind(Object(d.a)(Object(d.a)(a))),a.handleFormSubmission=a.handleFormSubmission.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"settings-controller"},r.a.createElement("form",{className:"settings-form",onSubmit:function(t){e.handleFormSubmission(t)}},r.a.createElement(b,{propName:"minSize",propLabel:"Min Size",propValue:this.state.minSize,propMin:1,propMax:10,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),r.a.createElement(b,{propName:"multiplierPrecision",propLabel:"x Precision",propValue:this.state.multiplierPrecision,propMin:0,propMax:100,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),r.a.createElement(b,{propName:"decay",propLabel:"Decay",propValue:this.state.decay,propMin:10,propMax:100,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),r.a.createElement(b,{propName:"decayPrecision",propLabel:"D Precision",propValue:this.state.decayPrecision,propMin:0,propMax:100,fieldChange:this.handleFormChange,formSubmit:this.handleFormSubmission}),r.a.createElement("input",{className:"reset-button",type:"submit",value:"Reset"})))}}]),t}(n.Component)),v=(Object(m.b)(function(e){return{settings:e.settings,nodes:e.nodes,leaves:e.leaves}},function(e){return{updateSettings:function(t){return e({type:"UPDATE_SETTINGS",settings:t})},reset:function(){return e({type:"RESET"})},createRoot:function(){return e({type:"CREATE_ROOT"})},createNodes:function(){return e({type:"CREATE_NODES"})}}})(f),a(8)),O=a(11),M=a(24),j=a.n(M),x=a(18),E=a(20);function w(e,t,a){return e.map(function(e,n){var r=Object.assign({},e);return r.angle+=D(t[a][0]),r})}function S(e,t){return e.findIndex(function(e){return t>=e[0]&&t<=e[1]})}function y(e){return Math.round(180*e/Math.PI)}function D(e){return Math.round(e*Math.PI*100/180)/100}var R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).fromRangeToAngle=function(){return{deg:parseFloat(a.props.angle),rad:D(parseFloat(a.props.angle))}},a.fromAngleToRange=function(){var e=a.state.angleRange;e[parseFloat(a.state.id[0])][parseFloat(a.state.id[1])]=a.state.angle.deg,a.setState({angleRange:e})},a.toggleHover=function(){a.setState({hover:!a.state.hover})},a.onMouseDown=function(e){0===e.button&&(a.setState({dragging:!0}),e.stopPropagation(),e.preventDefault())},a.onMouseUp=function(e){a.setState({dragging:!1,mouseQuad:0}),e.stopPropagation(),e.preventDefault()},a.onMouseMove=function(e){if(a.state.dragging){var t=e.pageY-a.state.center.cy,n=e.pageX-a.state.center.cx,r=Math.atan(t/n);n<0&&t<0?r-=Math.PI:n<0&&t>0&&(r+=Math.PI),r<=a.state.minMax.min&&(r=a.state.minMax.min),r>=a.state.minMax.max&&(r=a.state.minMax.max),Math.abs(a.state.angle.rad-r)>Math.PI/4&&(r=a.state.angle.rad),a.updateStates(r),e.stopPropagation(),e.preventDefault()}},a.updateStates=function(e){a.setState({angle:{deg:y(e),rad:e}}),a.fromAngleToRange(),a.props.handleChange(a.state.angleRange,"angleRange",a.state.id),a.setState({minMax:a.props.minMax})},a.state={angleRange:a.props.settings.angleRange,radius:parseFloat(a.props.radius),handle:{height:3},hover:!1,dragging:!1,id:a.props.id,minMax:a.props.minMax},a.state=Object(v.a)({},a.state,{center:{cx:10+parseFloat(a.props.radius),cy:-10+a.props.viewportDims.height-a.props.radius},angle:a.fromRangeToAngle()}),a.state=Object(v.a)({},a.state,{pos:{x:parseFloat(a.state.radius),y:parseFloat(a.state.radius)}}),a.onMouseDown=a.onMouseDown.bind(Object(d.a)(Object(d.a)(a))),a.onMouseUp=a.onMouseUp.bind(Object(d.a)(Object(d.a)(a))),a.onMouseMove=a.onMouseMove.bind(Object(d.a)(Object(d.a)(a))),a.fromRangeToAngle=a.fromRangeToAngle.bind(Object(d.a)(Object(d.a)(a))),a.fromAngleToRange=a.fromAngleToRange.bind(Object(d.a)(Object(d.a)(a))),a.updateStates=a.updateStates.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp))}},{key:"render",value:function(){var e=["handlebars"];this.state.hover&&(e+="hover");var t={position:"absolute",height:"".concat(this.state.handle.height,"px"),width:this.state.radius,left:"".concat(this.state.pos.x,"px"),top:"".concat(this.state.pos.y,"px"),transform:"rotate(".concat(this.state.angle.deg,"deg)"),transformOrigin:"0px",borderRadius:"5px",textAlign:"end",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",paddingRight:"5px"};return r.a.createElement("div",{style:t,className:e,onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,onMouseDown:this.onMouseDown},r.a.createElement(x.a,{icon:E.b}),r.a.createElement(x.a,{icon:E.a}))}}]),t}(n.Component),C=Object(m.b)(function(e){return{settings:e.settings,viewportDims:e.viewportDims}},function(e){return{}})(R);function T(e,t){return e.reduce(function(e,t){return e.concat(t)},[])}function F(e,t){return e.map(function(e){return e[t]})}var A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormChange=function(e,t,n){a.setState(Object(h.a)({},t,e)),a.setState({minMax:a.calcAllMinMax()})},a.calcAllMinMax=function(){var e=T(a.state.angleRange),t=T([-180,e,180]),n=t.map(function(e,n){if(0===n||n===t.length-1)return{};var r=n-1,i=n+1,o=Math.floor((n-1)/2)+""+(n-1)%2;return Object(h.a)({},o,{min:D(t[r]+a.state.pad),max:D(t[i]-a.state.pad)})});return Object.assign.apply(Object,[{}].concat(Object(O.a)(n)))},a.createPieData=function(e,t){return T(e.map(function(e,n,r){var i=0;i=n>=r.length-1?t+360:r[n+1][0];var o={title:"".concat(n),value:parseFloat(e[1])%360-parseFloat(e[0])%360,color:"rgba(210, 77, 87, 0.7)"},s=i-parseFloat(e[1])%360;return[o,{title:"blank".concat(n),value:s,color:s<=a.state.pad?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.2)"}]}))},a.state={angleRange:a.props.settings.angleRange,maxAngleRanges:a.props.settings.maxAngleRanges,radius:a.props.radius},a.state=Object(v.a)({},a.state,{minMax:a.calcAllMinMax(),pad:10}),a.handleFormChange=a.handleFormChange.bind(Object(d.a)(Object(d.a)(a))),a.calcAllMinMax=a.calcAllMinMax.bind(Object(d.a)(Object(d.a)(a))),a.createPieData=a.createPieData.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.angleRange,a=Math.min.apply(Math,Object(O.a)(t[0])),n=this.state.radius;return r.a.createElement("div",{className:"radial-controller"},t.map(function(t,a){return r.a.createElement("div",{className:"rangeHandlebars",key:a},r.a.createElement(C,{radius:n,angle:parseFloat(t[0])%360,minMax:e.state.minMax[a+"0"],id:a+"0",handleChange:e.handleFormChange}),r.a.createElement(C,{radius:n,angle:parseFloat(t[1])%360,minMax:e.state.minMax[a+"1"],id:a+"1",handleChange:e.handleFormChange}))}),r.a.createElement(j.a,{data:this.createPieData(t,a),style:{width:"".concat(2*n,"px")},segmentsStyle:{transition:"stroke .3s"},startAngle:parseFloat(t[0][0])%360,totalValue:360,lineWidth:42,radius:42}))}}]),t}(n.Component),N=Object(m.b)(function(e){return{settings:e.settings}},function(e){return{updateSettings:function(t){return e({type:"UPDATE_SETTINGS",settings:t})},reset:function(){return e({type:"RESET"})}}})(A),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=a.props.viewportDims,a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(d.a)(Object(d.a)(a))),console.log("viewport",a.state),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight}),this.props.updateViewport(this.state)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",null),r.a.createElement(N,{radius:150})))}}]),t}(n.Component),_=Object(m.b)(function(e){return{viewportDims:e.viewportDims}},function(e){return{updateViewport:function(t){return e({type:"UPDATE_VIEWPORT",viewportDims:t})}}})(P);var k=function(e,t,a,n,r){var i=e*(t/100)*(n/100),o=0;return 2===r?o=Math.random()-Math.random():1===r||-1===r?o=r*Math.abs(Math.random()-Math.random()):r=-1,t/100*e+o*i*(100-a)/100};var I=function(e,t){var a=e.map(function(e,a){return function(e,t){var a=0,n=0,r=e.radius+10,i=[],o=0,s=(Math.atan(t.minSize/r),k(e.radius,t.multiplier,t.multiplierPrecision,50,2));if(e.radius<=t.minSize||40===e.id.length)return i;for(;s>=t.minSize;){a=k(s*Math.random(),t.decay,t.decayPrecision,100,2);var c=Math.atan(a/r);s-=a,a>=t.minSize&&(n+=c,i.push({id:e.id+""+o,radius:a,distance:r,coordX:e.coordX,coordY:e.coordY,angle:n}),o+=1,n+=c)}return function(e,t,a,n){var r,i=a.map(function(e,t){return e[1]-e[0]}).reduce(function(e,t){return e+t}),o=(a.length,i-t);o<0&&(o=0),r=0===e.length?0:D(o/(2*e.length)),D(a[0][0]);for(var s=[],c=e,l=[],u=0;u<a.length;u++){l=w(c,a,u);for(var p=0;p<c.length;p++){var d=Object.assign({},l[p]),m=d.angle+(2*p+1)*r;if(-1===S(a,y(m)))break;d.angle=m,s.push(d),c.splice(0,p)}}return s.filter(function(e){return null!=e}).map(function(e,t){var a=Object.assign({},e);return a.angle+=D(n),a})}(i,Math.abs(y(n)),t.angleRange,y(e.angle)%360).map(function(e,t){var a=Object.assign({},e);return a.coordX=a.coordX+a.distance*Math.cos(a.angle),a.coordY=a.coordY+a.distance*Math.sin(a.angle),a})}(e,t)});return a=T(a)};var z={viewportDims:{width:window.innerWidth,height:window.innerHeight},stage:{x:{min:0,max:window.innerWidth},y:{min:0,max:window.innerHeight},zoom:1},settings:{angleRange:[[-100,-70],[-45,45],[70,100]],maxAngleRanges:4,minSize:1,multiplier:130,multiplierPrecision:90,decay:80,decayPrecision:40},nodes:[],leaves:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,a=e.nodes.slice(),n=e.leaves.slice(),r=Object(v.a)({},e.settings),i=Object(v.a)({},e.viewportDims),o=e.stage;switch(t.type){case"RESET":var s={x:{min:0,max:window.innerWidth},y:{min:0,max:window.innerHeight},zoom:1};return Object(v.a)({},e,{nodes:[],leaves:[],stage:s});case"CREATE_ROOT":return n=a=[{id:0,radius:200,coordX:e.viewportDims.width/2,coordY:e.viewportDims.height/2,angle:0}],Object(v.a)({},e,{nodes:a,leaves:n});case"CREATE_NODES":return o=function(e,t,a){var n=F(e,"coordX"),r=F(e,"coordY"),i=Math.max.apply(Math,Object(O.a)(n).concat([t.x.max])),o=Math.min.apply(Math,Object(O.a)(n).concat([t.x.min])),s=Math.max.apply(Math,Object(O.a)(r).concat([t.y.max])),c=Math.min.apply(Math,Object(O.a)(r).concat([t.y.min])),l=Math.max(Math.abs(o),i-t.x.max),u=Math.max(Math.abs(c),s-t.y.max);return{x:{min:-l,max:t.x.max+l},y:{min:-u,max:t.y.max+u},zoom:Math.trunc(9e3/Math.max(1+2*l/a.width,1+2*u/a.height))/1e4}}(n=I(n,r),e.stage,e.viewportDims),a=a.concat(n),Object(v.a)({},e,{nodes:a,leaves:n,stage:o});case"UPDATE_SETTINGS":return r=t.settings,Object(v.a)({},e,{settings:r});case"UPDATE_VIEWPORT":return i=t.viewportDims,Object(v.a)({},e,{viewportDims:i});default:return e}},L=a(14),W=Object(L.b)(U,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__);o.a.render(r.a.createElement(m.a,{store:W},r.a.createElement(_,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.71e4c035.chunk.js.map